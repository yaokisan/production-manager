# 動画制作管理ダッシュボード 要件定義書

## 1. プロジェクト概要

### 1.1 目的
動画制作の納期管理と戻し管理を一元化し、制作ディレクターが全体状況を効率的に把握・管理できるダッシュボードシステムを構築する。

### 1.2 主要な課題解決
- 複数プロジェクトの納期管理の煩雑さ
- 戻し対応状況の把握困難
- コミュニケーションの分散
- スケジュール記憶の負担

### 1.3 対象ユーザー
- 制作ディレクター（メイン）
- 動画編集者
- その他制作関係者

## 2. 機能要件

### 2.1 プロジェクト管理
- **プロジェクト作成・編集**
  - プロジェクト名、クライアント名、概要の管理
  - 継続運用型プロジェクトに対応（本数制限なし）
  - デフォルトスケジュールテンプレートの設定

### 2.2 動画管理
- **動画情報管理**
  - タイトル、説明文、サムネイル画像
  - 公開予定日の設定
  - 編集担当者のアサイン

- **制作フロー管理**
  - 基本フロー：初稿→初稿戻し→二稿→二稿戻し→演者チェック提出→演者チェック完了→最終稿→投稿予約→公開
  - カスタムステップの追加（三稿、四稿等）
  - 各ステップでのURL格納（YouTube、GIGAファイル便等）
  - 補足説明の記載

### 2.3 戻し管理
- **戻し内容の分類**
  - 全体指示：動画全体に関する修正指示
  - 時間指定：特定の時間範囲への修正指示

- **戻し対応機能**
  - チェックボックスによる完了管理
  - 各戻し項目へのコメント・質問機能
  - 戻し残件数の可視化

### 2.4 スケジュール管理
- **自動スケジューリング**
  - 公開日からの逆算による納期自動設定
  - プロジェクトごとのリードタイム設定

- **ガントチャート**
  - ドラッグ&ドロップでの日程調整
  - 最大15動画の同時表示
  - 納品完了動画の非表示化

### 2.5 通知機能
- **LINE通知**
  - 納期前日通知
  - 納期当日通知
  - 遅延時の毎日通知
  - 戻し完了通知

### 2.6 ダッシュボード
- **緊急度別サマリー**
  - 遅延中、本日締切、明日締切、要戻し対応の件数表示

- **タイムライン表示**
  - 締切順での動画一覧
  - ステータスと担当者の表示
  - ワンクリックアクション

## 3. 非機能要件

### 3.1 パフォーマンス
- ページロード：3秒以内
- リアルタイム更新：1分以内
- 同時編集対応：最大10名

### 3.2 可用性
- サービス稼働率：99.5%以上
- レスポンシブ対応（PC/タブレット優先）

### 3.3 セキュリティ
- HTTPS通信
- 認証機能（詳細は後日検討）

### 3.4 拡張性
- 将来的なサービス展開を考慮した設計
- マルチテナント対応可能な構造

## 4. 技術要件

### 4.1 フロントエンド
- **フレームワーク**: Next.js 14 (App Router)
- **言語**: TypeScript
- **UI**: Tailwind CSS + shadcn/ui
- **状態管理**: TanStack Query + Zustand
- **ガントチャート**: 専用ライブラリ使用

### 4.2 バックエンド
- **データベース**: Supabase (PostgreSQL)
- **認証**: Supabase Auth
- **リアルタイム**: Supabase Realtime
- **ファイルストレージ**: Supabase Storage
- **API**: Next.js API Routes

### 4.3 インフラ
- **ホスティング**: Vercel
- **定期実行**: Vercel Cron Jobs
- **外部API**: LINE Messaging API

### 4.4 開発環境
- **パッケージマネージャー**: pnpm
- **コード品質**: ESLint + Prettier
- **Git hooks**: Husky
- **CI/CD**: GitHub Actions

## 5. 画面構成

### 5.1 画面一覧
1. ダッシュボード（ホーム）
2. プロジェクト一覧
3. プロジェクト詳細
   - 動画一覧（締切順/ステータス順/公開日順）
   - ガントチャート
   - プロジェクト設定
4. 動画詳細（モーダル/ドロワー）
   - 概要タブ
   - 制作フロータブ
   - 戻し管理タブ
   - 履歴タブ
5. カレンダービュー
6. 通知設定
7. アプリ設定

### 5.2 主要画面フロー
```
ダッシュボード
  ├→ プロジェクト一覧 → プロジェクト詳細
  │                        ├→ 動画詳細
  │                        └→ ガントチャート
  ├→ カレンダービュー
  └→ 各種設定
```

## 6. データベース設計

### 6.1 主要テーブル
- **projects**: プロジェクト情報
- **videos**: 動画情報
- **production_steps**: 制作ステップ
- **feedback_items**: 戻し内容
- **comments**: コメント
- **users**: ユーザー情報
- **notifications**: 通知履歴
- **schedule_templates**: スケジュールテンプレート

### 6.2 リレーション
- projects 1:N videos
- videos 1:N production_steps
- production_steps 1:N feedback_items
- feedback_items 1:N comments

## 7. 実装優先順位

### Phase 1（MVP）
1. 基本的なプロジェクト・動画管理
2. 制作フロー管理（固定ステップ）
3. 戻し管理機能
4. ダッシュボード
5. 基本的な通知機能

### Phase 2
1. ガントチャート
2. カスタムステップ対応
3. LINE通知連携
4. リアルタイム同期

### Phase 3
1. 詳細な権限管理
2. レポート機能
3. モバイル最適化
4. 高度な分析機能

## 8. 制約事項
- 初期リリースは日本語のみ対応
- ブラウザサポート：Chrome、Safari、Edge の最新版
- 動画ファイル自体のホスティングは行わない（URLリンクのみ）

## 9. 用語定義
- **プロジェクト**: 動画制作の管理単位（例：A社YouTubeチャンネル）
- **動画**: 個別の動画コンテンツ
- **ステップ**: 制作工程の各段階
- **戻し**: 修正指示・フィードバック
- **納期**: 各ステップの締切日時